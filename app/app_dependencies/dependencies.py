from sqlalchemy.ext.asyncio import AsyncSession
from app.infrastructure.database import AsyncSessionLocal


async def get_db() -> AsyncSession:
    async with AsyncSessionLocal() as db:
        yield db


"""


üìå –†–∞–∑–¥–µ–ª–∏–º –ø–æ —Å–ª–æ—è–º:
üîß SessionLocal
‚Äî —ç—Ç–æ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–∞—è —à—Ç—É–∫–∞,
‚Äî —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤ database.py,
‚Äî –æ–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ engine, —Ñ–∞–±—Ä–∏–∫–∞ —Å–µ—Å—Å–∏–π.
üìç –û–Ω–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç –æ FastAPI, Depends, –∏–ª–∏ –∂–∏–∑–Ω–µ–Ω–Ω–æ–º —Ü–∏–∫–ª–µ –∑–∞–ø—Ä–æ—Å–∞.

üß© get_db()
‚Äî —ç—Ç–æ —É–∂–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å (dependency),
‚Äî –æ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É (SessionLocal) –∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç –µ—ë –ø–æ–¥ FastAPI,
‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç Session –Ω–∞ –≤—Ä–µ–º—è –∑–∞–ø—Ä–æ—Å–∞,
‚Äî –∏ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –≤ –≤–∏–¥–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 
yield-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∑–∞–∫—Ä—ã—Ç–∏–µ–º.


"""